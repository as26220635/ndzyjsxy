<%@ include file="/WEB-INF/jsp/common/tag.jsp" %>
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<script>
    //查询额外参数
    function searchParams(param) {
        param.BC_ID = '${EXTRA.BC_ID}';
    }
</script>
<%--通用列表--%>
<%@ include file="/WEB-INF/jsp/admin/component/grid/dataGrid.jsp" %>
<script>
    setTimeout(function () {
        setMenuActive('admin-dataGrid-${MENU.SM_PARENTID}');
    }, 50);

    function updateInstructor() {
        ajax.getHtml('${BASE_URL}${Url.CLASS_INSTRUCTOR_UPDATE_URL}/${EXTRA.BC_ID}', {}, function (html) {
                model.show({
                    title: '修改辅导员',
                    content: html,
                    footerModel: model.footerModel.ADMIN,
                    <shiro:hasPermission name="INFO:CLASS_INSTRUCTOR_UPDATE_SAVE">
                    isConfirm: true,
                    confirm: function ($model) {
                        var $form = $('#addAndEditForm');
                        //验证
                        if (!validator.formValidate($form)) {
                            demo.showNotify(ALERT_WARNING, VALIDATE_FAIL);
                            return;
                        }
                        var params = packFormParams($form);

                        ajax.put('${BASE_URL}${Url.CLASS_INSTRUCTOR_UPDATE_URL}', params, function (data) {
                            ajaxReturn.data(data, $model, $dataGrid, false);
                        });
                    }
                    </shiro:hasPermission>
                });
            }
        );
    }
</script>